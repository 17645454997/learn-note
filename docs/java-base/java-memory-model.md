## Java内存模型
* Java内存模型定义了一种多线程访问 Java 内存的规范。Java 内存模型要完整讲不是这里几句话能说 清楚的，我简单总结一下 Java 内存模型的几部分内容：
* Java 内存模型将内存分为了主内存和工作内存。类的状态，也就是类之间共享的变量，是存储在 主内存中的，每次 Java 线程用到这些主内存中的变量的时候，会读一次主内存中的变量，并让这些 内存在自己的工作内存中有一份拷贝，运行自己线程代码的时候，用到这些变量，操作的都是自己工 作内存中的那一份。在线程代码执行完毕之后，会将最新的值更新到主内存中去 
* 定义了几个原子操作，用于操作主内存和工作内存中的变量
* 定义了 volatile 变量的使用规则 happens-before，即先行发生原则，定义了操作 A 必然先行发生于操作 B 的一些规则，比如在 同一个线程内控制流前面的代码一定先行发生于控制流后面的代码、一个释放锁 unlock 的动作一定 先行发生于后面对于同一个锁进行锁定 lock 的动作等等，只要符合这些规则，则不需要额外做同步 措施，如果某段代码不符合所有的 happens-before 规则，则这段代码一定是线程非安全的